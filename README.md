# NextJS GraphQL Fullstack Template

A Next.js full-stack boilerplate with type-safe end-to-end GraphQL API connection, authorization and authentication 

- [demo](https://nextjs-graphql-fullstack-devchristam.vercel.app/)

## Features

- [NextJS](https://nextjs.org/) 

- [Pnpm](https://pnpm.io/) for package manager

- [Typescript](https://www.typescriptlang.org/)

- [ESLint](https://eslint.org/) with [react](https://www.npmjs.com/package/eslint-plugin-react), [prettier](https://www.npmjs.com/package/eslint-plugin-prettier) and [tailwindcss](https://www.npmjs.com/package/eslint-plugin-tailwindcss) plugin

- [Prettier](https://prettier.io/)

- [NextJS Layouts](https://nextjs.org/docs/basic-features/layouts) boilerplate

- [TailwindCSS](https://tailwindcss.com/)

- [React Query](https://tanstack.com/query/v4) with [React Query Devtool](https://tanstack.com/query/v4/docs/devtools)

- [GraphQL Request](https://github.com/prisma-labs/graphql-request) for graphql fetcher

- [GraphQL Codegen](https://www.the-guild.dev/graphql/codegen) for react-query and graphql-request frontend code generation

- [NextAuth](https://next-auth.js.org/) for authentication

- [GraphQL Yoga](https://www.the-guild.dev/graphql/yoga-server) integrated graphql server with [Next.js API Route.](https://www.the-guild.dev/graphql/yoga-server/docs/integrations/integration-with-nextjs)

- [TypeGraphQL](https://typegraphql.com/) for defining graphql schema, [validation](https://typegraphql.com/docs/1.1.1/validation.html) and role based [authorization](https://typegraphql.com/docs/1.1.1/authorization.html)

- [Prisma](https://www.prisma.io/) for database model definition and ORM

## Getting started

```bash
npx degit devchristam/nextjs-graphql-fullstack my-next-app
cd my-next-app
pnpm i
```

## Checklist

When you use this template, follow this checklist to update your info properly

- [ ] Change the author name in `LICENSE`
- [ ] Change the project name in `package.json`
- [ ] Run `cp .env.sample .env` and fill in your info in `.env`
- [ ] Clean up demonstration code (browse posts, read post)
  - [ ] `./src/frontend`
  - [ ] `./src/pages`
  - [ ] `./src/server`
  - [ ] `./prisma/schema.prisma`
- [ ] Clean up the README.md

## Usage

### Set up database
```bash
pnpm run prisma:db-push
```
recommend to use [PlatnetScale](https://planetscale.com/) for your mysql database, if you don't want to use planetscale for development, you can run `docker-compose up -d` for a mysql image.

### Development

```bash
pnpm run dev
```

run the dev server at http://localhost:3000, you can visit http://localhost:3000/api/graphql for graphiql (disable at production)

```bash
pnpm run codegen
```

run graphql codegen to generate frontend code, all the generated code will located at `./src/generated/*`

the `./src/generated/schema.gql` is generated by typegraphql  automatically on every build of the schema [(link)](https://typegraphql.com/docs/1.1.1/emit-schema.html), please make sure run the `pnpm run codegen` command after the new `./src/generated/schema.gql` is generated



```bash
pnpm run dev:codegen
```

if you want to run the graphql codegen in [watch mode](https://www.the-guild.dev/graphql/codegen/docs/getting-started/development-workflow) and run the dev server concurrently



### Build

```bash
pnpm run build
# run graphql codegen and build nextjs
pnpm run build:codegen
```
